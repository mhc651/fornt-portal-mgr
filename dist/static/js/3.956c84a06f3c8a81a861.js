webpackJsonp([3],{dPMc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),n=a("BO1k"),s=a.n(n),o=a("Dd8w"),l=a.n(o),d=a("dlmu"),u=(a("YK/q"),a("gNfH")),c=a("NYxO"),v={data:function(){return{disabledSub:!1,read:!0,viewerContainer:"",pic:"",modal:{show:!1,title:"",data:"",val:"",tip:"1、 默认不操作√、×，视审核结果为通过，不显示此弹框。\n2、审核员，打×，显示此弹框，需在此处输入原因。\n3、点击按钮【确定】，需把审核结果与意见显示在当前资质。\n4、审核结果与审核意见需同步到审核信息模块。举例：营业执照：审核不通过，审核意见是xxx\n"},auditContentTip:"说明：审核结果：通过。此处可不输审核意见\n           审核结果：不通过。此处必须输入审核意见\n\n注意：如果审核员，只在此审核信息模块选择不通过，不操作：×，需提示：您未对任何一项资质进行单独审核，请先审核具体资质项，在提交回复！",form:{},auditData:{},server:"",table:{columns:[{title:"机构名称",key:"orgName"},{title:"被授权人姓名",key:"authUserRealName"},{title:"被授权人手机号",key:"authUserPhoneNo"},{title:"审核人",key:"authUserPhoneNo"},{title:"变更时间",key:"authUserPhoneNo"},{title:"审核时间",key:"authUserPhoneNo"}],data:[]}}},computed:{model:function(){return[{type:"string",data:"orgName",name:"企业名称",required:!0,state:""},{type:"string",data:"legalName",name:"法人姓名",required:!0},{type:"string",data:"credit",name:"统一社会信用代码/营业执照代码/执业许可证代码",required:!0},{type:"string",data:"licenseNumber",name:"统一社会信用代码/营业执照代码/执业许可证代码",required:!0},{type:"string",data:"authUserRealName",name:"被授权人姓名",required:!0},{type:"string",data:"authUserCardNo",name:"被授权人身份证号",required:!0},{type:"string",data:"authUserPhoneNo",name:"被授权人手机号码",required:!0},{type:"string",data:"userName",name:"登录账号",required:!0,read:!0},{type:"file",data:"buzLicenceFile",name:"营业执照",required:!0,state:""},{type:"file",data:"organizationFile",name:"组织机构代码证",state:""},{type:"file",data:"taxFile",name:"税务登记证",state:""},{type:"file",data:"authFile",name:"企业授权函",required:!0,state:""},{type:"file",data:"licenseFile",name:"执业许可证文件",required:!0,state:""}]}},methods:l()({},Object(c.b)(["orgInfo","registeredAudit"]),{readPic:function(t){this.pic=t,this.viewerContainer.show()},reviewFalse:function(t){this.modal.show=!0,this.modal.data=t,this.modal.title=t.name,this.modal.val=this.auditData[t.data]},reviewTure:function(t){delete this.auditData[t.data],this.setAuditContent()},reviewOk:function(){var t=this.modal.data;this.auditData[t.data]=this.modal.val,this.setAuditContent()},setAuditContent:function(){var t="",e=!0,a=!1,i=void 0;try{for(var r,n=s()(this.model);!(e=(r=n.next()).done);e=!0){var o=r.value,l=this.auditData[o.data];l&&(t+=o.name+":"+l+"\n")}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}this.form.auditContent=t},subForm:function(){var t=this;if(""===this.form.auditResultFlag)return this.$Modal.warning({content:"审核结果不能为空"}),!1;this.disabledSub=!0;var e=JSON.parse(r()(this.form));e.auditData=r()(this.auditData);var a="false"!==e.auditResultFlag;if(""!==this.form.auditContent&&a)return this.$Modal.confirm({title:"警告",content:"审核意见存在不通过的资料，确定要审核通过吗",onOk:function(){t.registeredAudit(e).then(function(e){t.disabledSub=!1,t.$router.go(-1)},function(e){t.disabledSub=!1})}}),!1;""!==this.form.auditContent||a?this.registeredAudit(e).then(function(e){t.disabledSub=!1,t.$router.go(-1)},function(e){t.disabledSub=!1}):this.$Modal.confirm({title:"警告",content:"审核意见未填写，确定要审核不通过吗",onOk:function(){t.registeredAudit(e).then(function(e){t.disabledSub=!1,t.$router.go(-1)},function(e){t.disabledSub=!1})}})}}),created:function(){var t=this,e=this.$route.params;e.id&&e.user||this.$router.go(-1);var a={orgId:e.id,userId:e.user,auditStatus:!1};this.$route.query.review&&(this.read=!1,this.form={orgId:e.id,userId:e.user,auditResultFlag:"",auditContent:""},a.auditStatus=!0),this.orgInfo(a).then(function(e){var a=e.content;if(a.auditDetail.length){var i=a.auditDetail[0];if(t.form.auditResultFlag=String(i.auditResultFlag),t.form.auditContent=i.auditContent,i.auditDataList.length){i.auditDataList[0];t.auditData=i.auditDataList[0]}}t.server=a})},mounted:function(){var t=this,e=document.createElement("img");this.viewerContainer=new d.a(e,{url:function(e){return t.pic}})},components:{TopToolBar:u.a}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-tool-bar",{staticClass:"title--bg",attrs:{title:"企业注册审核"}},[a("span",{attrs:{slot:"btn"},slot:"btn"},[t.read?t._e():a("Button",{attrs:{disabled:t.disabledSub,type:"primary"},on:{click:t.subForm}},[t._v("提交回复")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),a("span",{attrs:{slot:"content"},slot:"content"},[a("strong",{staticClass:"help"},[t._v("说明")]),t._v(" "),a("p",[t._v("\r\n          无\r\n        ")])])]),t._v(" "),a("div",{staticClass:"page-container"},[t.read&&t.form.auditResultFlag||!t.read?a("div",[a("h5",{staticClass:"title"},[t._v("\r\n          审核信息\r\n        ")]),t._v(" "),a("table",{staticClass:"info-table"},[a("tr",[t._m(0),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("Select",{attrs:{disabled:t.read},model:{value:t.form.auditResultFlag,callback:function(e){t.$set(t.form,"auditResultFlag",e)},expression:"form.auditResultFlag"}},[a("Option",{attrs:{value:"true"}},[t._v("通过")]),t._v(" "),a("Option",{attrs:{value:"false"}},[t._v("不通过")])],1)],1)]),t._v(" "),a("tr",[a("th",{staticClass:"label"},[t._v("审核意见")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("Input",{attrs:{readonly:!0,type:"textarea",rows:5,placeholder:t.auditContentTip},model:{value:t.form.auditContent,callback:function(e){t.$set(t.form,"auditContent",e)},expression:"form.auditContent"}})],1)])])]):t._e(),t._v(" "),a("div",[a("h5",{staticClass:"title"},[t._v("\r\n        企业信息和授权信息\r\n      ")]),t._v(" "),a("table",{staticClass:"info-table"},t._l(t.model,function(e){return"string"===e.type&&t.server.orgInfo&&t.server.orgInfo[e.data]?a("tr",{key:e.index},[a("th",{staticClass:"label"},[e.required?a("span",{staticClass:"required"},[t._v("*")]):t._e(),t._v("\r\n              "+t._s(e.name)+"\r\n            ")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v("\r\n              "+t._s(t.server.orgInfo[e.data])+"\r\n            ")])]):t._e()}))]),t._v(" "),a("div",[a("h5",{staticClass:"title"},[t._v("\r\n        授权文件\r\n      ")]),t._v(" "),a("table",{staticClass:"info-table"},[t._m(1),t._v(" "),t._l(t.model,function(e){return"file"===e.type&&t.server.orgInfo&&t.server.orgInfo[e.data]||t.auditData[e.data]&&"file"===e.type?a("tr",{key:e.index},[a("th",{staticClass:"label"},[e.required?a("span",{staticClass:"required"},[t._v("*")]):t._e(),t._v("\r\n              "+t._s(e.name)+" \r\n            ")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t.server.orgInfo[e.data+"Info"]&&t.server.orgInfo[e.data+"Info"].url?a("p",[a("a",{on:{click:function(a){t.readPic(t.server.orgInfo[e.data+"Info"].url)}}},[t._v(t._s(t.server.orgInfo[e.data+"Info"].name))])]):a("p",[t._v("\r\n                无\r\n              ")]),t._v(" "),t.auditData[e.data]?a("div",[t._m(2,!0),t._v(" "),a("p",[t._v("\r\n                  原因："+t._s(t.auditData[e.data])+"\r\n                  ")])]):t._e()]),t._v(" "),t.read?t._e():a("td",{attrs:{align:"center"}},[a("Button",{attrs:{type:"primary",icon:"close"},on:{click:function(a){t.reviewFalse(e)}}}),t._v(" "),a("Button",{attrs:{type:"primary",icon:"checkmark"},on:{click:function(a){t.reviewTure(e)}}})],1)]):t._e()})],2),t._v(" "),a("Modal",{attrs:{title:t.modal.title,width:"700"},on:{"on-ok":t.reviewOk},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("table",{staticClass:"info-table"},[a("tr",[a("th",{staticClass:"label"},[t._v("审核意见")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[a("Input",{attrs:{type:"textarea",rows:5,placeholder:t.modal.tip},model:{value:t.modal.val,callback:function(e){t.$set(t.modal,"val",e)},expression:"modal.val"}})],1)])])])],1),t._v(" "),t.table.data.length?a("div",[a("h5",{staticClass:"title"},[t._v("\r\n        变更记录（每变更一次就生成一条变更记录，列表只显示审核通过的变更记录。）\r\n      ")]),t._v(" "),a("Table",{ref:"selection",staticClass:"table",attrs:{border:"",columns:t.table.columns}})],1):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{staticClass:"label"},[e("span",{staticClass:"required"},[this._v("*")]),this._v("审核结果")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"tr--only"},[e("th",{staticClass:"label"},[this._v("\r\n            授权文件\r\n          ")]),this._v(" "),e("td",{attrs:{colspan:"2"}},[this._v("\r\n            未找到任何文件\r\n          ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\r\n                  状态："),e("span",{staticClass:"red"},[this._v("审核不通过")])])}]};var h=a("VU/8")(v,f,!1,function(t){a("yaN/"),a("ihGi")},"data-v-10a5f261",null);e.default=h.exports},ihGi:function(t,e){},"yaN/":function(t,e){}});