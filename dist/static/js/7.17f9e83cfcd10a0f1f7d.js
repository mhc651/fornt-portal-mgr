webpackJsonp([7],{md3T:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("gNfH"),s=n("W13U"),r=n("NYxO"),l=n("4naa"),c=n.n(l),u={data:function(){var t=this,e={total:0,size:c.a.PAGE_SIZE_ARR[0],page:1,PAGE_SIZE_ARR:c.a.PAGE_SIZE_ARR,filter:[{data:"orgName",name:"企业名称",type:"string"},{data:"name",name:"姓名",type:"string"},{data:"phone",name:"手机号",type:"string"},{data:"date",name:"注册时间",default:[],type:"daterange"},{data:"valid",name:"是否有效",type:"select",options:[{value:" ",label:"全部"},{value:"0",label:"不可用"},{value:"1",label:"可用"}]},{name:"按钮组",type:"btns",cells:[{name:"筛选",type:"filter"},{name:"重置",type:"reset"}]}]};return e.columns=[{type:"selection",width:60,align:"center"},{title:"登录账号",key:"userName",render:function(e,n){return e("a",{on:{click:function(){t.linkData(n.row)}}},n.row.userName)}},{title:"姓名",key:"realName"},{title:"手机号",key:"phone"},{title:"账号类型",key:"userType",render:function(t,e){return t("span","01"===e.row.userType?"主帐号":"子帐号")}},{title:"邮箱",key:"email"},{title:"是否有效",key:"valid",render:function(t,e){var n={0:{title:"权限受限",color:"#f00"},1:{title:"可用",color:"green"}},a=e.row.valid;return t("span",{style:{color:n[a].color}},n[a].title)}}],{model:e,tableDate:[],pwTip:{bool:!1,content:""}}},methods:i()({},Object(r.b)(["userList","userDelete","userResetPw","userAudit"]),{linkData:function(t,e){var n={name:"用户信息",params:{id:t.id}};e&&(n.query={edit:1}),this.$router.push(n)},gotoEdit:function(){var t=this.$refs.table.checkout;return t.length?t.length>1?this.$Message.warning({content:c.a.ERROR_EDIT_MORE}):void this.linkData(t[0],1):this.$Message.warning({content:c.a.ERROR_EDIT_EMPTY})},initTable:function(t){var e=this;0==t.userType&&(t.userType="")," "==t.valid&&(t.valid=""),this.userList(t).then(function(t){e.tableDate=t.content.records,e.model.total=t.content.total})},setUserAuditTable:function(){var t=this,e=this.$refs.table,n=this.$refs.table.checkout;if(n.length){var a=n.map(function(t){return t.id}).join(",");this.$Modal.confirm({content:"确定要启用选中对象的权限吗！",onOk:function(){t.userAudit({ids:a}).then(function(n){t.$Message.success({content:"成功"}),e.getData()},function(t){})}})}else this.$Message.warning({content:"请选择启用权限的对象？"})},deleteTable:function(){var t=this,e=this.$refs.table,n=this.$refs.table.checkout;if(n.length){var a=n.map(function(t){return t.id}).join(",");this.$Modal.confirm({content:"确定要限制选中的对象的权限吗！",onOk:function(){t.userDelete({ids:a}).then(function(n){t.$Message.success({content:"成功"}),e.getData()},function(t){})}})}else this.$Message.warning({content:"请选择要限制权限的对象?"})},resetPwTable:function(){var t=this,e=this.$refs.table,n=this.$refs.table.checkout;if(n.length){var a=n.map(function(t){return t.id}).join(",");this.$Modal.confirm({content:"确定要重置密码吗！",onOk:function(){t.userResetPw({userId:a}).then(function(n){t.pwTip.bool=!0,t.pwTip.content=n.content,e.getData()},function(t){})}})}else this.$Message.warning({content:"请选择要重置密码的对象"})}}),components:{TopToolBar:o.a,TablePage:s.a}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("top-tool-bar",{attrs:{title:"用户管理"}},[n("span",{attrs:{slot:"btn"},slot:"btn"}),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[n("strong",{staticClass:"help"},[t._v("说明")]),t._v(" "),n("p",[t._v("\n          无\n          ")])])]),t._v(" "),n("div",{staticClass:"page-container"},[n("table-page",{ref:"table",attrs:{filter:t.model.filter,getDataFn:t.initTable,columns:t.model.columns,pagerSizeArr:t.model.PAGE_SIZE_ARR,pagerSize:t.model.size,data:t.tableDate,total:t.model.total,storage:"portalmgr"+t.$route.path}}),t._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"新增用户",query:{edit:1}})}}},[t._v("新增")]),t._v(" "),n("Button",{on:{click:t.gotoEdit}},[t._v("编辑")]),t._v(" "),n("Button",{attrs:{type:"error"},on:{click:t.deleteTable}},[t._v("限制权限")]),t._v(" "),n("Button",{attrs:{type:"success"},on:{click:t.setUserAuditTable}},[t._v("启用权限")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.resetPwTable}},[t._v("密码重置")])],1)],1),t._v(" "),n("Modal",{attrs:{title:"提示",width:"300"},model:{value:t.pwTip.bool,callback:function(e){t.$set(t.pwTip,"bool",e)},expression:"pwTip.bool"}},[n("p",[t._v(t._s(t.pwTip.content))])])],1)},staticRenderFns:[]},d=n("VU/8")(u,p,!1,null,null,null);e.default=d.exports}});